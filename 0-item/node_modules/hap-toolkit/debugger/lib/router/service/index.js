"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInspectorUrl=getInspectorUrl,exports.routerConf=routerConf,exports.serverConf=serverConf,exports.getDebugInfoFromRequest=getDebugInfoFromRequest,exports.SOURCE=exports.LINK_MODE=void 0;var _utils=require("../../lib/utils"),LINK_MODE={NULL:0,WIFI:1,ADB:2};exports.LINK_MODE=LINK_MODE;var SOURCE={IDE:"ide"};function getInspectorUrl(e){var t=e.ws,r=e.serverPort,o="http://".concat((0,_utils.getServerIPAndPort)(r)),n="?ws=".concat(encodeURI(t),"&remoteFrontend=true&dockSide=undocked");return"".concat(o).concat("/inspector/inspector.html").concat(n)}function routerConf(e){return e.router.conf}function serverConf(e){return e.conf}function getClientFromRequest(e){var t=(0,_utils.getClientIPAddress)(e),r=(0,_utils.getIPv4IPAddress)(),o=e.header["device-serial-number"],n=LINK_MODE.NULL;return"127.0.0.1"===t&&o?n=LINK_MODE.ADB:"127.0.0.1"!==t&&t!==r&&(n=LINK_MODE.WIFI),{clientIp:t,sn:o,linkMode:n}}function getDebugInfoFromRequest(e){var t=getClientFromRequest(e),r=t.sn,o=t.linkMode,n=e.body,s=n.ws,i=n.application,u=s.split(":")[1].split("/")[0];return{sn:r,linkMode:o,ws:s,application:i,devicePort:u}}exports.SOURCE=SOURCE;
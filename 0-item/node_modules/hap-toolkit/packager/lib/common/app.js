"use strict";var chai=require("hybrid-chai/chai");require("hybrid-mocha/mocha.js"),global.assert=chai.assert,global.expect=chai.expect,global.should=chai.should(),global.model=null,global.assert.approxEqual=function(e,o,l){var a=Math.abs(Math.abs(e)-Math.abs(o));global.assert.isAtMost(a,2,l)},global.loadData=function(e){var o=null;return o="undefined"==typeof window?global[e]:global.localStorage.getItem(e),JSON.parse(o||null)},global.saveData=function(e,o){return"undefined"==typeof window?global[e]=JSON.stringify(o):global.localStorage.setItem(e,JSON.stringify(o)),o},global.pushData=function(e,o){var l=global.loadData(e)||[];l.push(o),global.saveData(e,l)},global.window&&(global.window.onerror=function(){console.info("error: ",arguments)});var timer=0;global.nextTime=function(e){return void 0!==e&&(timer=e),timer+=50},global.setTimeoutDone=function(e,o,l){if(!l)throw new Error("[ERROR] 异步的测试用例请传递Mocha的done函数！");global.setTimeout(function(){try{e()}catch(e){l(e)}},o)},global.normalize=function(t){return t=t||{},Object.keys(t).forEach(function(e){t[e]&&t[e].replace&&(t[e]=t[e].replace(/px/g,""));var o=t[e];if(-1<["margin","padding","borderWidth","borderColor"].indexOf(e)&&/\s+/.test(o)){var l=o.replace(/,\s+/g,",").split(/\s+/),a=l.reduce(function(e,o){return e[o]=!0,e},{});1===Object.keys(a).length&&(t[e]=l[0])}o=t[e],/^\d*\.?\d*$/.test(o)&&!isNaN(parseFloat(o))&&(t[e]=+o,t[e+"Std"]=Math.round(750*t[e]/global.Env.deviceWidth))}),t},global.nodeRect=function(e){return e=e.ref||e,global.model=global.model||require("@system.model"),global.model.getBoundingRect({ref:e})||{}},global.nodeAttr=function(e){return e=e.ref||e,global.model=global.model||require("@system.model"),global.model.getComputedAttr({ref:e})||{}},global.nodeStyle=function(e){return e=e.ref||e,global.model=global.model||require("@system.model"),global.model.getComputedStyle({ref:e})||{}},global.nodeInfo=function(e){return e=e.ref||e,global.model=global.model||require("@system.model"),global.model.getComponent({ref:e})||{}};
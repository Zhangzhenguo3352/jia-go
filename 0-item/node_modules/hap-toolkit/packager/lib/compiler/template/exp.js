"use strict";var _expression=_interopRequireDefault(require("./lib/expression")),_text=_interopRequireDefault(require("./lib/text"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function trimhtml(e){if((e=e.replace(/^\s\s+/," ")).length<=1)return e;var t=" "===e.charAt(0)?1:0;return 1<=e.length-(e=e.trim()).length-t&&(e+=" "),(t?" ":"")+e}function transExpr(expContent,toFunc){var ret,trimExpContent=expContent.trim();if(_text.default.isExpr(trimExpContent)){ret=[];var tokens=_text.default.parseText(trimExpContent),isSingle=1===tokens.length;tokens.forEach(function(e){if(e.tag){var t=_expression.default.parseExpression(e.value);isSingle||(t="("+t+")"),ret.push(t)}else ret.push("'"+e.value+"'")}),isSingle||ret.unshift("''"),ret=ret.join(" + "),!1!==toFunc&&(ret=eval("(function () {return "+ret+"})"))}else ret=trimhtml(expContent);return ret}transExpr.isExpr=_text.default.isExpr,transExpr.singleExpr=_text.default.singleExpr,transExpr.removeExprffix=_text.default.removeExprffix,transExpr.addExprffix=_text.default.addExprffix,module.exports=transExpr;
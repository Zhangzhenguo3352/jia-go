"use strict";var _webpackSources=require("webpack-sources");function HandlerPlugin(n){this.options=n}function wrapCode(n,e){if(new RegExp(".js$").test(n))return 0===n.indexOf("app.js")?new _webpackSources.ConcatSource("(function(){\n  ".concat("Y"===process.env.NODE_TEST?'global = typeof window === "undefined" ? global.__proto__  : window ;':"","\n  var createAppHandler = function() {\n    return "),e.assets[n],'\n  };\n  if (typeof window === "undefined") {\n    return createAppHandler();\n  }\n  else {\n    window.createAppHandler = createAppHandler\n    // H5注入manifest以获取features\n    global.manifest = '.concat(JSON.stringify(global.framework.manifest),";\n  }\n})();")):new _webpackSources.ConcatSource("(function(){\n  ".concat("Y"===process.env.NODE_TEST?'global = typeof window === "undefined" ? global.__proto__  : window ;':"","\n  var createPageHandler = function() {\n    return "),e.assets[n],'\n  };\n  if (typeof window === "undefined") {\n    return createPageHandler();\n  }\n  else {\n    window.createPageHandler = createPageHandler\n  }\n})();')}HandlerPlugin.prototype.apply=function(n){n.hooks.compilation.tap("HandlerPlugin",function(o){o.hooks.optimizeChunkAssets.tapAsync("HandlerPlugin",function(n,e){n.forEach(function(n){n.files.forEach(function(n){var e=wrapCode(n,o);e&&(o.assets[n]=e)})}),e()})})},module.exports=HandlerPlugin;